# Instructions for our Blog Deployment Robot ðŸ¤–

name: Deploy Engineer Blog

# WHEN should this robot wake up and work?
on:
  push:
    branches: [ main ]

# WHAT jobs should the robot do?
jobs:
  
  # Job 1: Test the blog
  test-blog:
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“¥ Download our code from GitHub
      uses: actions/checkout@v4
      
    - name: ðŸŸ¢ Set up Node.js for testing
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: ðŸ§ª Run our tests
      run: node test.js
      
    - name: âœ… Tests completed successfully
      run: echo "Blog tests passed! Ready for deployment."

  # Job 2: Deploy the blog (only if tests pass)
  deploy-blog:
    needs: test-blog
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“¥ Download our code from GitHub
      uses: actions/checkout@v4
      
    - name: ðŸš€ Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./
        
    - name: ðŸŽ‰ Deployment successful
      run: echo "Blog is live"
